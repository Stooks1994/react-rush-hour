{"ast":null,"code":"var _jsxFileName = \"/Users/ian/react/rush-hour/src/components/Piece.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport Draggable from 'react-draggable';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BOARD_SIZE = 6;\nconst SIZE_MOD = 100 / BOARD_SIZE;\n\nconst calculateBounds = (id, x, y, h, w) => {\n  let boardBoundingRect = document.getElementById('main-board').getBoundingClientRect();\n  let currElement = document.getElementById(id);\n  let left = 0 - x;\n  let top = 0 - y;\n  let right = boardBoundingRect.width - w;\n  let bottom = boardBoundingRect.height - h;\n  return {\n    left: {\n      left\n    },\n    top: {\n      top\n    },\n    right: {\n      right\n    },\n    bottom: {\n      bottom\n    }\n  };\n};\n\nconst preparePiece = (id, x, y, h, w, axis, color, coordHandler) => {\n  let xPos = x * SIZE_MOD;\n  let yPos = y * SIZE_MOD;\n  let height = h * SIZE_MOD;\n  let width = w * SIZE_MOD;\n  return /*#__PURE__*/_jsxDEV(Draggable, {\n    axis: axis,\n    bounds: calculateBounds(id, xPos, yPos, height, width),\n    onStop: coordHandler,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      id: id,\n      style: {\n        position: 'absolute',\n        left: `${xPos}%`,\n        top: `${yPos}%`,\n        height: `${height}%`,\n        width: `${width}%`,\n        backgroundColor: `${color}`\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 9\n  }, this);\n};\n\nconst Piece = props => {\n  _s();\n\n  const [currX, setCurrX] = useState(props.pieceProps.x);\n  const [currY, setCurrY] = useState(props.pieceProps.y);\n\n  const passNewBinToParent = () => {\n    let currElement = document.getElementById(props.pieceProps.id);\n    let boardPx = document.getElementById('main-board').getBoundingClientRect().width;\n    let vals = currElement.style.transform.match(/-?[0-9]+/gm);\n\n    if (vals.length == 1) {\n      // Only has transform in X direction\n      let xTransform = Number(vals[0]);\n      let newOffset = currElement.offsetLeft + xTransform;\n      let newBin = boardPx / newOffset;\n\n      switch (Math.trunc(newBin)) {\n        case 0:\n          newBin = 5;\n          break;\n\n        case 1:\n          newBin = 4;\n          break;\n\n        case 2:\n          newBin = 3;\n          break;\n\n        case 3:\n          newBin = 2;\n          break;\n\n        case 4:\n          newBin = 1;\n          break;\n\n        case 5:\n          newBin = 0;\n          break;\n\n        default:\n          newBin = 0;\n      }\n\n      props.onFinishedDragging(props.pieceProps.id, newBin);\n    } else {\n      // Has transforms for both X and Y directions -- X will be 0\n      let yTransform = Number(vals[1]);\n      let newOffset = currElement.offsetTop + yTransform;\n      let newBin = boardPx / newOffset;\n\n      switch (Math.trunc(newBin)) {\n        case 0:\n          newBin = 5;\n          break;\n\n        case 1:\n          newBin = 4;\n          break;\n\n        case 2:\n          newBin = 3;\n          break;\n\n        case 3:\n          newBin = 2;\n          break;\n\n        case 4:\n          newBin = 1;\n          break;\n\n        case 5:\n          newBin = 0;\n          break;\n\n        default:\n          newBin = 0;\n      }\n\n      props.onFinishedDragging(props.pieceProps.id, newBin);\n    }\n  };\n\n  let currPiece = props.pieceProps.orientation == 'HORIZONTAL' ? preparePiece(props.pieceProps.id, currX, currY, 1, props.pieceProps.size, 'x', props.pieceProps.color, passNewBinToParent) : preparePiece(props.pieceProps.id, currX, currY, props.pieceProps.size, 1, 'y', props.pieceProps.color, passNewBinToParent);\n  return currPiece;\n};\n\n_s(Piece, \"/A3MDO/EzisF3q3SKiJ9PBrtAyo=\");\n\n_c = Piece;\nexport default Piece;\n\nvar _c;\n\n$RefreshReg$(_c, \"Piece\");","map":{"version":3,"sources":["/Users/ian/react/rush-hour/src/components/Piece.js"],"names":["React","useState","Draggable","BOARD_SIZE","SIZE_MOD","calculateBounds","id","x","y","h","w","boardBoundingRect","document","getElementById","getBoundingClientRect","currElement","left","top","right","width","bottom","height","preparePiece","axis","color","coordHandler","xPos","yPos","position","backgroundColor","Piece","props","currX","setCurrX","pieceProps","currY","setCurrY","passNewBinToParent","boardPx","vals","style","transform","match","length","xTransform","Number","newOffset","offsetLeft","newBin","Math","trunc","onFinishedDragging","yTransform","offsetTop","currPiece","orientation","size"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,SAAP,MAAsB,iBAAtB;;AAEA,MAAMC,UAAU,GAAG,CAAnB;AACA,MAAMC,QAAQ,GAAG,MAAMD,UAAvB;;AAEA,MAAME,eAAe,GAAG,CAACC,EAAD,EAAKC,CAAL,EAAQC,CAAR,EAAWC,CAAX,EAAcC,CAAd,KAAoB;AACxC,MAAIC,iBAAiB,GAAGC,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCC,qBAAtC,EAAxB;AACA,MAAIC,WAAW,GAAGH,QAAQ,CAACC,cAAT,CAAwBP,EAAxB,CAAlB;AAEA,MAAIU,IAAI,GAAG,IAAIT,CAAf;AACA,MAAIU,GAAG,GAAG,IAAIT,CAAd;AACA,MAAIU,KAAK,GAAGP,iBAAiB,CAACQ,KAAlB,GAA0BT,CAAtC;AACA,MAAIU,MAAM,GAAGT,iBAAiB,CAACU,MAAlB,GAA2BZ,CAAxC;AAEA,SAAO;AACHO,IAAAA,IAAI,EAAE;AAACA,MAAAA;AAAD,KADH;AAEHC,IAAAA,GAAG,EAAE;AAACA,MAAAA;AAAD,KAFF;AAGHC,IAAAA,KAAK,EAAE;AAACA,MAAAA;AAAD,KAHJ;AAIHE,IAAAA,MAAM,EAAE;AAACA,MAAAA;AAAD;AAJL,GAAP;AAMH,CAfD;;AAiBA,MAAME,YAAY,GAAG,CAAChB,EAAD,EAAKC,CAAL,EAAQC,CAAR,EAAWC,CAAX,EAAcC,CAAd,EAAiBa,IAAjB,EAAuBC,KAAvB,EAA8BC,YAA9B,KAA+C;AAChE,MAAIC,IAAI,GAAGnB,CAAC,GAAGH,QAAf;AACA,MAAIuB,IAAI,GAAGnB,CAAC,GAAGJ,QAAf;AACA,MAAIiB,MAAM,GAAGZ,CAAC,GAAGL,QAAjB;AACA,MAAIe,KAAK,GAAGT,CAAC,GAAGN,QAAhB;AAEA,sBACI,QAAC,SAAD;AAAW,IAAA,IAAI,EAAEmB,IAAjB;AAAuB,IAAA,MAAM,EAAElB,eAAe,CAACC,EAAD,EAAKoB,IAAL,EAAWC,IAAX,EAAiBN,MAAjB,EAAyBF,KAAzB,CAA9C;AAA+E,IAAA,MAAM,EAAEM,YAAvF;AAAA,2BACI;AAAK,MAAA,EAAE,EAAEnB,EAAT;AAAa,MAAA,KAAK,EAAE;AAChBsB,QAAAA,QAAQ,EAAC,UADO;AAEhBZ,QAAAA,IAAI,EAAE,GAAEU,IAAK,GAFG;AAGhBT,QAAAA,GAAG,EAAE,GAAEU,IAAK,GAHI;AAIhBN,QAAAA,MAAM,EAAE,GAAEA,MAAO,GAJD;AAKhBF,QAAAA,KAAK,EAAE,GAAEA,KAAM,GALC;AAMhBU,QAAAA,eAAe,EAAE,GAAEL,KAAM;AANT;AAApB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,UADJ;AAYH,CAlBD;;AAoBA,MAAMM,KAAK,GAAGC,KAAK,IAAI;AAAA;;AACnB,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBhC,QAAQ,CAAC8B,KAAK,CAACG,UAAN,CAAiB3B,CAAlB,CAAlC;AACA,QAAM,CAAC4B,KAAD,EAAQC,QAAR,IAAoBnC,QAAQ,CAAC8B,KAAK,CAACG,UAAN,CAAiB1B,CAAlB,CAAlC;;AAEA,QAAM6B,kBAAkB,GAAG,MAAM;AAC7B,QAAItB,WAAW,GAAGH,QAAQ,CAACC,cAAT,CAAwBkB,KAAK,CAACG,UAAN,CAAiB5B,EAAzC,CAAlB;AAEA,QAAIgC,OAAO,GAAG1B,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCC,qBAAtC,GAA8DK,KAA5E;AACA,QAAIoB,IAAI,GAAGxB,WAAW,CAACyB,KAAZ,CAAkBC,SAAlB,CAA4BC,KAA5B,CAAkC,YAAlC,CAAX;;AAEA,QAAIH,IAAI,CAACI,MAAL,IAAe,CAAnB,EAAsB;AAClB;AACA,UAAIC,UAAU,GAAGC,MAAM,CAACN,IAAI,CAAC,CAAD,CAAL,CAAvB;AACA,UAAIO,SAAS,GAAG/B,WAAW,CAACgC,UAAZ,GAAyBH,UAAzC;AACA,UAAII,MAAM,GAAGV,OAAO,GAAGQ,SAAvB;;AAEA,cAAOG,IAAI,CAACC,KAAL,CAAWF,MAAX,CAAP;AACI,aAAK,CAAL;AACIA,UAAAA,MAAM,GAAG,CAAT;AACA;;AACJ,aAAK,CAAL;AACIA,UAAAA,MAAM,GAAG,CAAT;AACA;;AACJ,aAAK,CAAL;AACIA,UAAAA,MAAM,GAAG,CAAT;AACA;;AACJ,aAAK,CAAL;AACIA,UAAAA,MAAM,GAAG,CAAT;AACA;;AACJ,aAAK,CAAL;AACIA,UAAAA,MAAM,GAAG,CAAT;AACA;;AACJ,aAAK,CAAL;AACIA,UAAAA,MAAM,GAAG,CAAT;AACA;;AACJ;AACIA,UAAAA,MAAM,GAAG,CAAT;AApBR;;AAuBAjB,MAAAA,KAAK,CAACoB,kBAAN,CAAyBpB,KAAK,CAACG,UAAN,CAAiB5B,EAA1C,EAA8C0C,MAA9C;AACH,KA9BD,MA8BO;AACH;AACA,UAAII,UAAU,GAAGP,MAAM,CAACN,IAAI,CAAC,CAAD,CAAL,CAAvB;AACA,UAAIO,SAAS,GAAG/B,WAAW,CAACsC,SAAZ,GAAwBD,UAAxC;AAEA,UAAIJ,MAAM,GAAGV,OAAO,GAAGQ,SAAvB;;AAEA,cAAOG,IAAI,CAACC,KAAL,CAAWF,MAAX,CAAP;AACI,aAAK,CAAL;AACIA,UAAAA,MAAM,GAAG,CAAT;AACA;;AACJ,aAAK,CAAL;AACIA,UAAAA,MAAM,GAAG,CAAT;AACA;;AACJ,aAAK,CAAL;AACIA,UAAAA,MAAM,GAAG,CAAT;AACA;;AACJ,aAAK,CAAL;AACIA,UAAAA,MAAM,GAAG,CAAT;AACA;;AACJ,aAAK,CAAL;AACIA,UAAAA,MAAM,GAAG,CAAT;AACA;;AACJ,aAAK,CAAL;AACIA,UAAAA,MAAM,GAAG,CAAT;AACA;;AACJ;AACIA,UAAAA,MAAM,GAAG,CAAT;AApBR;;AAuBAjB,MAAAA,KAAK,CAACoB,kBAAN,CAAyBpB,KAAK,CAACG,UAAN,CAAiB5B,EAA1C,EAA8C0C,MAA9C;AACH;AACJ,GApED;;AAsEA,MAAIM,SAAS,GAAGvB,KAAK,CAACG,UAAN,CAAiBqB,WAAjB,IAAgC,YAAhC,GACVjC,YAAY,CAACS,KAAK,CAACG,UAAN,CAAiB5B,EAAlB,EAAsB0B,KAAtB,EAA6BG,KAA7B,EAAoC,CAApC,EAAuCJ,KAAK,CAACG,UAAN,CAAiBsB,IAAxD,EAA8D,GAA9D,EAAmEzB,KAAK,CAACG,UAAN,CAAiBV,KAApF,EAA2Fa,kBAA3F,CADF,GAEVf,YAAY,CAACS,KAAK,CAACG,UAAN,CAAiB5B,EAAlB,EAAsB0B,KAAtB,EAA6BG,KAA7B,EAAoCJ,KAAK,CAACG,UAAN,CAAiBsB,IAArD,EAA2D,CAA3D,EAA8D,GAA9D,EAAmEzB,KAAK,CAACG,UAAN,CAAiBV,KAApF,EAA2Fa,kBAA3F,CAFlB;AAIA,SAAOiB,SAAP;AACH,CA/ED;;GAAMxB,K;;KAAAA,K;AAiFN,eAAeA,KAAf","sourcesContent":["import React, { useState } from 'react'\nimport Draggable from 'react-draggable';\n\nconst BOARD_SIZE = 6;\nconst SIZE_MOD = 100 / BOARD_SIZE;\n\nconst calculateBounds = (id, x, y, h, w) => {\n    let boardBoundingRect = document.getElementById('main-board').getBoundingClientRect();\n    let currElement = document.getElementById(id)\n\n    let left = 0 - x;\n    let top = 0 - y;\n    let right = boardBoundingRect.width - w;\n    let bottom = boardBoundingRect.height - h;\n\n    return {\n        left: {left}, \n        top: {top}, \n        right: {right}, \n        bottom: {bottom}\n    }\n}\n\nconst preparePiece = (id, x, y, h, w, axis, color, coordHandler) => {\n    let xPos = x * SIZE_MOD;\n    let yPos = y * SIZE_MOD;\n    let height = h * SIZE_MOD;\n    let width = w * SIZE_MOD;\n\n    return (\n        <Draggable axis={axis} bounds={calculateBounds(id, xPos, yPos, height, width)} onStop={coordHandler}>\n            <div id={id} style={{\n                position:'absolute', \n                left:`${xPos}%`, \n                top:`${yPos}%`, \n                height:`${height}%`, \n                width:`${width}%`, \n                backgroundColor:`${color}`,\n            }} />\n        </Draggable>\n    )\n}\n\nconst Piece = props => {\n    const [currX, setCurrX] = useState(props.pieceProps.x);\n    const [currY, setCurrY] = useState(props.pieceProps.y);\n\n    const passNewBinToParent = () => {\n        let currElement = document.getElementById(props.pieceProps.id)\n\n        let boardPx = document.getElementById('main-board').getBoundingClientRect().width\n        let vals = currElement.style.transform.match(/-?[0-9]+/gm)\n\n        if (vals.length == 1) {\n            // Only has transform in X direction\n            let xTransform = Number(vals[0])\n            let newOffset = currElement.offsetLeft + xTransform\n            let newBin = boardPx / newOffset\n\n            switch(Math.trunc(newBin)) {\n                case 0: \n                    newBin = 5\n                    break;\n                case 1:\n                    newBin = 4\n                    break;\n                case 2:\n                    newBin = 3\n                    break;\n                case 3:\n                    newBin = 2\n                    break;\n                case 4:\n                    newBin = 1\n                    break;\n                case 5:\n                    newBin = 0\n                    break;\n                default:\n                    newBin = 0\n            }\n        \n            props.onFinishedDragging(props.pieceProps.id, newBin)\n        } else {\n            // Has transforms for both X and Y directions -- X will be 0\n            let yTransform = Number(vals[1])\n            let newOffset = currElement.offsetTop + yTransform\n\n            let newBin = boardPx / newOffset\n\n            switch(Math.trunc(newBin)) {\n                case 0: \n                    newBin = 5\n                    break;\n                case 1:\n                    newBin = 4\n                    break;\n                case 2:\n                    newBin = 3\n                    break;\n                case 3:\n                    newBin = 2\n                    break;\n                case 4:\n                    newBin = 1\n                    break;\n                case 5:\n                    newBin = 0\n                    break;\n                default:\n                    newBin = 0\n            }\n            \n            props.onFinishedDragging(props.pieceProps.id, newBin)\n        }\n    }\n\n    let currPiece = props.pieceProps.orientation == 'HORIZONTAL' \n        ? preparePiece(props.pieceProps.id, currX, currY, 1, props.pieceProps.size, 'x', props.pieceProps.color, passNewBinToParent)\n        : preparePiece(props.pieceProps.id, currX, currY, props.pieceProps.size, 1, 'y', props.pieceProps.color, passNewBinToParent);\n\n    return currPiece;\n}\n\nexport default Piece;"]},"metadata":{},"sourceType":"module"}